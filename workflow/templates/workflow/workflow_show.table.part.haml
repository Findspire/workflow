- load static
- load i18n
- load workflow_tags
    %table
        %thead
            %tr.category
                %th{:style => "width: 65%;"}
                    {{ category.name }}
                    %a.controls{href: "{% url 'workflow:item_model_add_to_workcat' workflow.pk category.pk %}"}
                        {% trans "Add an item" %}

                %th.take_untake_category{:style => "width: 120px;"}
                    %span{class: "take"}
                        %a{href:"{% url 'workflow:update' which_display 'take' 'category' category.pk workflow.pk %}?next={{ request.path }}", title:"Take all items of the category"}
                            {% trans "Take all" %}
                    \/
                    %span{class: "untake"}
                        %a{href:"{% url 'workflow:update' which_display 'untake' 'category' category.pk workflow.pk %}?next={{ request.path }}", title:"Untake all items of the category"}
                            {% trans "Untake all" %}
                    %span{class: "show", id: "take_untake_category_{{ category.pk }}_show"}
                        %a{href:"{% url 'workflow:update' which_display 'show' 'category' category.pk workflow.pk %}?next={{ request.path }}"}

                %th

                %th
                
                %th
        %tbody#sortable
            - for item in items_list
                %tr.item_list{class: "highlight {% if forloop.counter|divisibleby:2 %}{% else %}odd_line{% endif %}", "data-url" => "{% url 'workflow:drag_item' item.pk %}", "data-item-pk" => "{{ item.pk }}"}
                    %td.item
                        %a{href: "{% url 'workflow:item_instance_show' item.pk %}", title:"{{ item.item_model.name}}"}
                            {{ item.item_model.name }}
                        - for url, ticket_id in item.item_model.name|get_tickets
                            - if forloop.counter == 1
                                %strong{style:"margin-left:20px;"}
                                    {% trans "Tickets:" %}
                            %a.urls{href:"{{ url }}", alt:"Ticket #{{ ticket_id }}"}
                                \#{{ ticket_id }}
                            - if not forloop.last
                                \-
                    
                    %td.take_untake_item
                        - include "workflow/workflow_show.take_untake.part.haml"

                    %td{:style => "width: 72px"}
                        - if item.comments.count
                            %a.comment{:href => "", "data-target" => "pop-up"}
                                %img{:src => "{% static 'workflow/img/comment.png' %}", :alt => ""}/
                            %div.pop-up{"data-url" => "{% url 'workflow:get_item_comments' item.pk %}"}
                                %span.close
                                    %img{:src => "{% static 'workflow/img/untake.png' %}", :alt => ""}/
                                %ul
                                
                    %td.validate
                        - include "workflow/workflow_show.validate.part.haml"

                    %td
                        %a.close{:href => "{% url 'workflow:delete_item_view' workflow.pk item.pk %}"}
                            %img{:src => "{% static 'workflow/img/untake.png'%}"}
                            



